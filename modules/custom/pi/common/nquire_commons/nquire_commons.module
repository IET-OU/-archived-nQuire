<?php

function nquire_commons_nids_by_type_and_user($type, $uid) {
  
  $nids = array();
  
  $query = "SELECT nid FROM {node} WHERE {node}.type='%s' AND {node}.uid='%d'";
  $result = db_query($query, $type, $uid);
  while($row = db_fetch_array($result)) {
    $nids[] = $row['nid'];
  }
  
  return $nids;  
}

function nquire_commons_nodes_by_type_and_user($type, $uid) {
  $nids = nquire_commons_nids_by_type_and_user($type, $uid);
  
  $nodes = array();
  foreach($nids as $nid) {
    $nodes[$nid] = node_load($nid);
  }
  
  return $nodes;  
}

function nquire_commons_nodes2table($nodes, $fields) {
  $rows = array();
  foreach($nodes as $node) {
    $row = array();
    foreach($fields as $field) {
      $row[] = $node->$field;
    }
    $rows[] = $row;
  } 
  return $rows;
} 


function nquire_commons_load_javascript_module_support() {
  drupal_add_js(drupal_get_path('module', 'nquire_commons') .'/js/modules.js');
}

function nquire_commons_load_nquire_widget_support() {
  drupal_add_css(drupal_get_path('module', 'nquire_commons') .'/css/nQuireWidget.css');
  drupal_add_js(drupal_get_path('module', 'nquire_commons') .'/js/jquery.nQuireWidget.js');
}


function nquire_commons_load_nquire_tooltip_support() {
  drupal_add_js(drupal_get_path('module', 'nquire_commons') . '/js/jquery.nQuireTooltip.js');
  drupal_add_css(drupal_get_path('module', 'nquire_commons') . '/css/nQuireTooltip.css');
}

function nquire_commons_create_widget_title($title) {
  return "<div class='nquire-widget-title'>$title</div>";
}
function nquire_commons_create_widget_description($description) {
  return "<div class='nquire-widget-description'>$description</div>";
}
