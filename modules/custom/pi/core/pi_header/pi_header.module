<?php

// $Id: pi_header.module,v 1.2 2009/06/24 09:17:48 ou_pm Exp $

define('NQUIRE_VERSION', 'BETA3 2013-05-02');

function pi_header_block($op = 'list') {
  switch ($op) {
    case 'list':
      $blocks = array();
      $blocks[0]['info'] = t('Activity guide header');
      return $blocks;

    case 'view':
      $module_path = drupal_get_path('module', 'pi_header');
      $image_path = base_path() . $module_path . '/images/';
      drupal_add_css($module_path . '/pi_header.css');


      if (arg(0) === 'home') {
        $output = '<div style="height:281px;width:100%;text-align:center;">'
                . '<div style="height:281px;width:960px;display:inline-block;text-align:left;padding-left:25px;">'
                . '<img width="924" src="' . $image_path . 'home_' . rand(1, 4) . '.png' . '"></img>'
                . '</div>'
                . '</div>';
      } else {

        $details = get_inquiry_details_from_current_path();
        $inquiry = node_load($details->inquiry_id);


        $output = '<div class="nquire_header">';

        $output .= "<div>" . l('<img src="' . $image_path . 'logo.png" height="50px" >', '/', array('html' => TRUE)) . "</div>";

        if (arg(0) == 'inquiry' || arg(0) == 'phase' || arg(0) == 'activity') {
          $output .= '<div>'
                  . l('<img src="' . $image_path . 'nQuire_diagram_icon.png" height="50px">', "inquiry/{$inquiry->nid}", array('html' => TRUE))
                  . '</div>';
          $output .= "<div>" . l(check_plain($inquiry->title), "inquiry/{$inquiry->nid}") . '</div>';
        }

        $output .= '</div>';
      }


      $block['content'] = $output;
      return $block;
  }
}
